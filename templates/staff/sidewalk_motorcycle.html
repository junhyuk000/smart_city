{% extends "base.html" %}  
{% block extra_css %}
<style>
    body { font-family: Arial, sans-serif; text-align: center; }
    img { width: 50%; border: 2px solid black; margin-top: 20px; }
    #alert { font-size: 20px; font-weight: bold; color: red; }
</style>
{% endblock %}
{% block navigation %}
{% if 'admin_id' in session and session['admin_role'] == 'staff' %}
<nav class="header-nav">
    <div class="nav-menu" id="favorites-nav">
        <span class="favorites-label">ì¦ê²¨ì°¾ê¸°:</span>
        <!-- ì¦ê²¨ì°¾ê¸° í•­ëª©ë“¤ì´ ì—¬ê¸°ì— ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        <span id="no-favorites-message">ë“±ë¡ëœ ì¦ê²¨ì°¾ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤</span>
    </div>
</nav>
{% endif %}
{% endblock %}
{% block title %}ì¸ë„(ì˜¤í† ë°”ì´){% endblock %}  

{% block content %}
<h1>ğŸš¨ ì˜¤í† ë°”ì´ ê°ì§€ ì‹œìŠ¤í…œ</h1>
    <img src="{{ url_for('video_feed') }}" width="640" height="480">
    <h3 id="alert">ê°ì§€ëœ ì˜¤í† ë°”ì´ ì—†ìŒ</h3>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/staff.js') }}"></script>
<script>
    function checkAlert() {
        fetch("/alert_status")
            .then(response => response.json())
            .then(data => {
                if (data.motorcycle_detected) {
                    document.getElementById("alert").innerText = "ğŸš¨ ì˜¤í† ë°”ì´ ê°ì§€!";
                } else {
                    document.getElementById("alert").innerText = "ê°ì§€ëœ ì˜¤í† ë°”ì´ ì—†ìŒ";
                }
            });
    }
    setInterval(checkAlert, 2000);
</script>
{% endblock %}

