{% extends "base.html" %}  
{% block title %}답변 미완료 문의 조회{% endblock %}  
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/user_dashboard_inquiries_view.css') }}">
<style>
    .container {
        min-height: 600px;
        margin-top: 150px;
    }
    
    /* 페이지네이션 스타일 */
    .pagination {
        display: flex;
        justify-content: center;
        margin-top: 20px;
    }
    
    .pagination a {
        color: black;
        padding: 8px 16px;
        text-decoration: none;
        border: 1px solid #ddd;
        margin: 0 4px;
    }
    
    .pagination a.active {
        background-color: #007bff;
        color: white;
        border: 1px solid #007bff;
    }
    
    /* 상태 표시 스타일 */
    .status {
        padding: 3px 8px;
        border-radius: 3px;
        font-size: 0.8em;
    }
    
    .pending {
        background-color: #ffc107;
        color: #212529;
    }
    
    .completed {
        background-color: #28a745;
        color: white;
    }
    
    /* 버튼 스타일 */
    .detail-button {
        padding: 5px 10px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 3px;
        cursor: pointer;
    }
    
    .detail-button:disabled {
        background-color: #cccccc;
        cursor: not-allowed;
    }
</style>
{% endblock %}

{% block navigation %}
<nav class="header-nav">
    <div class="nav-menu" id="favorites-nav">
        <span class="favorites-label">즐겨찾기:</span>
        <!-- 즐겨찾기 항목들이 여기에 자바스크립트로 추가됩니다 -->
        <span id="no-favorites-message">등록된 즐겨찾기가 없습니다</span>
    </div>
</nav>
{% endblock %}

{% block content %}
<div class="container">
    <h2 style="text-align:center;">답변 미완료 문의 조회</h2>
    <table class="inquiry-table">
        <thead>
            <tr>
                <th>번호</th>
                <th>작성자</th>
                <th>문의사유</th>
                <th>문의내용</th>
                <th>답변상태</th>
                <th>문의시간</th>
            </tr>
        </thead>
        <tbody>
            {% for post in posts %}
            <tr>
                <td>{{ loop.revindex }}</td>
                <td>{{ post.user_name }}</td>
                <td>{{ post.inquiry_reason }}</td>
                <td>
                    {% if 'admin_id' in session %}
                    <form action="{{ url_for('admin_view_posts_member', userid=post.user_id) }}" method="POST">
                        <input type="hidden" name="enquired_at" value="{{ post.inquiry_time }}">
                        <button type="submit" class="detail-button">내용보기</button>
                    </form>
                    {% else %}
                    <button class="detail-button" disabled>내용보기</button>
                    <i class="fas fa-lock fa-1x"></i>
                    {% endif %}
                </td>
                <td>
                    <span class="status pending">답변 대기 중</span>
                </td>
                <td>{{ post.inquiry_time }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <!-- 페이지네이션 -->
    <div class="pagination">
        {% for p in range(1, (total // per_page) + (1 if total % per_page else 0) + 1) %}
            {% if p == current_page %}
                <a class="active">{{ p }}</a>
            {% else %}
                <a href="{{ url_for('admin_inquiries_pending', page=p) }}">{{ p }}</a>
            {% endif %}
        {% endfor %}
    </div>
</div>

<script src="https://kit.fontawesome.com/your-kit-id.js" crossorigin="anonymous"></script>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/admin.js') }}"></script>
{% endblock %}